(()=>{"use strict";const e=[["`","1","2","3","4","5","6","7","8","9","0","-","=","Backspace"],["Tab","q","w","e","r","t","y","u","i","o","p","[","]","\\","Del"],["Caps Lock","a","s","d","f","g","h","j","k","l",";","'","Enter"],["Shift","z","x","c","v","b","n","m",",",".","/","&#9650","Shift"],["Ctrl","Opt","Alt"," ","Alt","&#9668","&#9660","&#9658","Ctrl"]],t=[["ё","1","2","3","4","5","6","7","8","9","0","-","=","Backspace"],["Tab","й","ц","у","к","е","н","г","ш","щ","з","х","ъ","&#92;","Del"],["Caps Lock","ф","ы","в","а","п","р","о","л","д","ж","э","Enter"],["Shift","я","ч","с","м","и","т","ь","б","ю",".","&#9650","Shift"],["Ctrl","Opt","Alt"," ","Alt","&#9668","&#9660","&#9658","Ctrl"]],a=[["Ё","!",'"',"№",";","%",":","?","*","(",")","_","+","Backspace"],["Tab","Й","Ц","У","К","Е","Н","Г","Ш","Щ","З","Х","Ъ","/","Del"],["Caps Lock","Ф","Ы","В","А","П","Р","О","Л","Д","Ж","Э","Enter"],["Shift","Я","Ч","С","М","И","Т","Ь","Б","Ю",",","&#9650","Shift"],["Ctrl","Opt","Alt"," ","Alt","&#9668","&#9660","&#9658","Ctrl"]],o=[["~","!","@","#","$","%","^","&","*","(",")","_","+","Backspace"],["Tab","Q","W","E","R","T","Y","U","I","O","P","{","}","|","Del"],["Caps Lock","A","S","D","F","G","H","J","K","L",":",'"',"Enter"],["Shift","Z","X","C","V","B","N","M","<",">","?","&#9650","Shift"],["Ctrl","Opt","Alt"," ","Alt","&#9668","&#9660","&#9658","Ctrl"]],n=[["Backquote","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","Digit0","Minus","Equal","Backspace"],["Tab","KeyQ","KeyW","KeyE","KeyR","KeyT","KeyY","KeyU","KeyI","KeyO","KeyP","BracketLeft","BracketRight","Backslash","Delete"],["CapsLock","KeyA","KeyS","KeyD","KeyF","KeyG","KeyH","KeyJ","KeyK","KeyL","Semicolon","Quote","Enter"],["ShiftLeft","KeyZ","KeyX","KeyC","KeyV","KeyB","KeyN","KeyM","Comma","Period","Slash","ArrowUp","ShiftRight"],["ControlLeft","MetaLeft","AltLeft","Space","AltRight","ArrowLeft","ArrowDown","ArrowRight","ControlRight"]],r=["Backspace","Tab","Delete","CapsLock","Enter","ShiftLeft","ArrowUp","ShiftRight","ControlLeft","MetaLeft","AltLeft","Space","AltRight","ControlRight","ArrowLeft","ArrowDown","ArrowRight"],c=e=>{const t=document.querySelector(".keyboard");t.innerHTML="",e.forEach(((e,a)=>{const o=document.createElement("div");o.className="keyboard-row",e.forEach(((e,t)=>{o.insertAdjacentHTML("beforeend",`<div class="key ${n[a][t]}" data-code="${n[a][t]}">${e}</div>`)})),t.append(o)})),document.querySelector(".CapsLock").insertAdjacentHTML("beforeend",'<div class="indicator"></div>')};let l=!1,s=!1;const i=(e,t)=>{const a=document.querySelectorAll(".key"),o=document.querySelector(".textarea");a.forEach((a=>{a.dataset.code===e&&(t.preventDefault(),o.focus(),o.setRangeText(a.innerHTML,o.selectionStart,o.selectionEnd,"end"))}))},d=e=>r.includes(e),g=e=>{e.preventDefault();const t=document.querySelector(".textarea");t.setRangeText("    ",t.selectionStart,t.selectionEnd,"end")},u=()=>{const e=document.querySelectorAll(".key");document.querySelector(".CapsLock").classList.toggle("on"),e.forEach((e=>{const t=e;1===e.innerHTML.length&&(t.innerHTML=l?e.innerHTML.toLowerCase():e.innerHTML.toUpperCase())})),l=!l},S=e=>{document.querySelectorAll(".key").forEach((t=>{t.dataset.code===e&&t.classList.add("active")}))},y=a=>{c(s?"en"===localStorage.getItem("lang")?e:t:a),l&&(l=!l,(()=>{const e=document.querySelectorAll(".key");document.querySelector(".CapsLock").classList.toggle("on"),e.forEach((e=>{const t=e;1===e.innerHTML.length&&(l||s?!l&&s&&(t.innerHTML=e.innerHTML.toUpperCase()):t.innerHTML=e.innerHTML.toLowerCase())})),l=!l})()),s=!s},f=n=>{n.repeat||("ru"===localStorage.getItem("lang")?(c(e),localStorage.setItem("lang","en")):(c(t),localStorage.setItem("lang","ru")),l&&(l=!l,u()),s&&(s=!s,y("en"===localStorage.getItem("lang")?o:a)))};window.addEventListener("DOMContentLoaded",(()=>{document.body.insertAdjacentHTML("afterbegin",'<main class="wrapper">\n      <div class="header">\n      <h1 class="title">Virtual Keyboard</h1>\n      <div class="info">\n        <p>Keyboard created in Ubuntu operating system</p>\n        <p>You can change the language using [ALT] + [CTRL]</p>\n        </div>\n      </div>\n      <textarea rows="10" cols="50" class="textarea"></textarea>\n        <div class="keyboard">\n        </div>\n    </main>'),null!==localStorage.getItem("lang")?"ru"===localStorage.getItem("lang")?c(t):c(e):(localStorage.setItem("lang","en"),c(e)),document.addEventListener("keydown",(e=>{const t=document.querySelector(".textarea"),{code:n}=e;"Tab"===n?g(e):"CapsLock"===n?u():"ShiftLeft"===n||"ShiftRight"===n?y("en"===localStorage.getItem("lang")?o:a):"AltLeft"===n||"AltRight"===n?e.preventDefault():e.altKey&&e.ctrlKey?f(e):"ArrowLeft"!==n&&"ArrowUp"!==n&&"ArrowRight"!==n&&"ArrowDown"!==n||i(n,e),d(n)?t.focus():i(n,e),S(n)})),document.addEventListener("keyup",(a=>{const{code:o}=a,n=document.querySelectorAll(".key");"ShiftLeft"!==o&&"ShiftRight"!==o||y("en"===localStorage.getItem("lang")?e:t),n.forEach((e=>{e.dataset.code===o&&e.classList.remove("active")}))})),document.addEventListener("mousedown",(e=>{const{code:t}=e.target.dataset,n=document.querySelector(".textarea");document.querySelectorAll(".key").forEach((e=>{e.dataset.code===t&&e.classList.add("active")})),"Tab"===t?g(e):"MetaLeft"===t?f(e):"ShiftLeft"===t||"ShiftRight"===t?y("en"===localStorage.getItem("lang")?o:a):"Space"===t?(e=>{e.preventDefault();const t=document.querySelector(".textarea");t.setRangeText(" ",t.selectionStart,t.selectionEnd,"end")})(e):"Enter"===t?(e=>{e.preventDefault();const t=document.querySelector(".textarea");t.setRangeText("\n",t.selectionStart,t.selectionEnd,"end")})(e):"Backspace"===t?(e=>{e.preventDefault(e);const t=document.querySelector(".textarea");t.selectionStart&&t.selectionStart===t.selectionEnd?t.setRangeText("",t.selectionStart-1,t.selectionEnd):t.selectionStart!==t.selectionEnd&&t.setRangeText("",t.selectionStart,t.selectionEnd)})(e):"Delete"===t?(e=>{e.preventDefault();const t=document.querySelector(".textarea");t.setRangeText("",t.selectionStart,t.selectionEnd+1)})(e):"CapsLock"===t?u():"ArrowLeft"!==t&&"ArrowUp"!==t&&"ArrowRight"!==t&&"ArrowDown"!==t||i(t,e),d(t)?n.focus():i(t,e),S(t)})),document.addEventListener("mouseup",(a=>{const o=document.querySelectorAll(".key"),{code:n}=a.target.dataset;"ShiftLeft"!==n&&"ShiftRight"!==n||y("en"===localStorage.getItem("lang")?e:t),o.forEach((e=>{e.dataset.code===n&&e.classList.remove("active")}))}))}))})();